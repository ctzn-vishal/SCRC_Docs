
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://ctzn-vishal.github.io/SCRC_Docs/computing-resources/slurm-array-jobs/">
      
      
        <link rel="prev" href="../submitting-batch-jobs/">
      
      
        <link rel="next" href="../running-interactive-jobs-fastx/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>Slurm Array Jobs - SCRC Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2afb09e1.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="deep-purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#using-the-task-id" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="SCRC Documentation" class="md-header__button md-logo" aria-label="SCRC Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SCRC Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Slurm Array Jobs
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="deep-purple"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../getting-started/getting-started-overview/" class="md-tabs__link">
          
  
  
    
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
    
  
  Computing Resources

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../storage-solutions/" class="md-tabs__link">
          
  
  
    
  
  Storage Solutions

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../research-datasets/" class="md-tabs__link">
          
  
  
    
  
  Research Datasets

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../software-and-applications/" class="md-tabs__link">
          
  
  
    
  
  Software and Applications

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../linux-tutorials/" class="md-tabs__link">
          
  
  
    
  
  Linux Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../cloud-computing/cloud-computing-overview/" class="md-tabs__link">
          
  
  
    
  
  Cloud Computing

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="SCRC Documentation" class="md-nav__button md-logo" aria-label="SCRC Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    SCRC Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/getting-started-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/getting-an-account/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting an SCRC Account
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/connecting-to-clusters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Connecting to SCRC Clusters
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/scrc-vs-nyu-hpc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SCRC vs NYU HPC
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Computing Resources
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Computing Resources
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../slurm-overview-commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Slurm Overview and Commands
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../submitting-batch-jobs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Submitting Batch Jobs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Slurm Array Jobs
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Slurm Array Jobs
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#using-the-task-id" class="md-nav__link">
    <span class="md-ellipsis">
      Using the Task ID
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#managing-output-files" class="md-nav__link">
    <span class="md-ellipsis">
      Managing Output Files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#python-example-real-volatility-calculation" class="md-nav__link">
    <span class="md-ellipsis">
      Python Example: Real Volatility Calculation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#r-example-fitspline-model" class="md-nav__link">
    <span class="md-ellipsis">
      R Example: Fitspline Model
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notes-and-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Notes and Considerations
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../running-interactive-jobs-fastx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Interactive Jobs (FastX)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../starting-interactive-sessions-srun/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Interactive Sessions (srun)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hardware-specifications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hardware Specifications
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../storage-solutions/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Storage Solutions
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Storage Solutions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage-solutions/home-and-bigdata-directories/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home and Bigdata Directories
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage-solutions/transferring-files/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Transferring Files
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../research-datasets/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Research Datasets
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Research Datasets
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research-datasets/wrds-access/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WRDS Access
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research-datasets/available-datasets.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Available Datasets
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../software-and-applications/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Software and Applications
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Software and Applications
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-and-applications/software-modules-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Software Modules System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-and-applications/python-virtual-environments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python Virtual Environments
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-and-applications/r-virtual-environments.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    R Virtual Environments
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-and-applications/installing-r-packages/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installing Local R Packages
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../linux-tutorials/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Linux Tutorials
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Linux Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linux-tutorials/basic-linux-commands.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic Linux Commands
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linux-tutorials/file-permissions.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    File Permissions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linux-tutorials/linux-pipes-redirection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linux Pipes and Redirection
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cloud Computing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Cloud Computing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud-computing/cloud-computing-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud-computing/requesting-virtual-machines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Requesting Virtual Machines
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>Slurm Array Jobs</h1>

<pre><code class="language-markdown">---
title: &quot;Slurm Array Jobs&quot;
category: &quot;computing-resources&quot;
description: &quot;Explanation and examples of using Slurm array jobs to run multiple similar tasks efficiently.&quot;
---

# Slurm Array Jobs

This page explains how to use Slurm array jobs on the SCRC cluster. Array jobs provide an efficient mechanism for submitting and managing collections of similar jobs quickly and easily. They are particularly useful when you need to run the same program multiple times with different input parameters or datasets.

## Overview

Instead of writing multiple individual job scripts or submitting the same script repeatedly, you can use a single job script with the `--array` directive. Slurm then creates multiple &quot;tasks&quot; within a single job allocation, each with its own unique task ID. This task ID can be used within your script to vary parameters, input files, or output filenames.

Benefits of using array jobs include:

*   **Efficiency:** Submit and manage many tasks with a single command.
*   **Scalability:** Easily scale up the number of tasks.
*   **Resource Management:** Each task can request specific resources, though often they share the same resource profile.

## Submitting Array Jobs

To submit an array job, use the `#SBATCH --array` directive in your Slurm script or the `--array` option with the `sbatch` command.

### The `--array` Directive

The `--array` directive specifies the range and stepping of the task IDs.

**Syntax:**

```bash
#SBATCH --array=&lt;indices&gt;
</code></pre>
<ul>
<li><code>&lt;indices&gt;</code> can be specified in several ways:<ul>
<li>A simple range: <code>1-5</code> (Tasks 1, 2, 3, 4, 5)</li>
<li>Specific indices: <code>0,1,5,10</code> (Tasks 0, 1, 5, 10)</li>
<li>A range with a step: <code>1-10:2</code> (Tasks 1, 3, 5, 7, 9)</li>
<li>A range with step and limit on concurrent tasks: <code>1-100%10</code> (Tasks 1 to 100, but only 10 run concurrently)</li>
</ul>
</li>
</ul>
<p><strong>Example in <code>sbatch</code> script:</strong></p>
<pre><code class="language-bash">#SBATCH --array=1-5  # Creates 5 tasks with IDs 1, 2, 3, 4, 5
</code></pre>
<p><strong>Example with <code>sbatch</code> command:</strong></p>
<p>You can also specify the array range directly when submitting the job, which overrides any <code>#SBATCH --array</code> directive in the script.</p>
<pre><code class="language-bash">sbatch --array=5-15:5 my_script.sbatch # Creates 3 tasks with IDs 5, 10, 15
</code></pre>
<h2 id="using-the-task-id">Using the Task ID</h2>
<p>Slurm sets the environment variable <code>SLURM_ARRAY_TASK_ID</code> for each task within the array job. You can use this variable in your job script to control the behavior of each task. Common uses include:</p>
<ul>
<li>Selecting different input files based on the task ID.</li>
<li>Passing different parameters to your program.</li>
<li>Creating unique output directories or filenames for each task.</li>
</ul>
<p><strong>Example Usage in Script:</strong></p>
<pre><code class="language-bash">#!/bin/bash
#SBATCH --array=1-3
#SBATCH --output=task_%a.out # Use %a for task ID in output name

INPUT_FILE=&quot;data_part_${SLURM_ARRAY_TASK_ID}.txt&quot;
OUTPUT_FILE=&quot;result_${SLURM_ARRAY_TASK_ID}.log&quot;

echo &quot;Running task ${SLURM_ARRAY_TASK_ID}&quot;
echo &quot;Input file: ${INPUT_FILE}&quot;
echo &quot;Output file: ${OUTPUT_FILE}&quot;

# Your command using the task-specific variables
# ./my_program --input ${INPUT_FILE} --output ${OUTPUT_FILE}
</code></pre>
<h2 id="managing-output-files">Managing Output Files</h2>
<p>It's crucial to manage output files so that tasks don't overwrite each other's results. Slurm provides placeholders for job and task IDs in the <code>#SBATCH --output</code> and <code>#SBATCH --error</code> directives:</p>
<ul>
<li><code>%A</code>: Replaced by the main Job ID.</li>
<li><code>%a</code>: Replaced by the Array Task ID.</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code class="language-bash">#SBATCH --job-name=myArrayJob
#SBATCH --array=1-10
#SBATCH --output=myArrayJob.%A-%a.out  # Creates files like myArrayJob.12345-1.out, myArrayJob.12345-2.out, etc.
#SBATCH --error=myArrayJob.%A-%a.err
</code></pre>
<h2 id="examples">Examples</h2>
<p>Run <code>getSlurmExamples</code> at the command line of <code>rnd</code> or <code>vleda</code> to have all the tutorials copied to your home directory.</p>
<h3 id="python-example-real-volatility-calculation">Python Example: Real Volatility Calculation</h3>
<p>This example runs a Python script (<code>realVol.py</code>) five times, each time calculating the real volatility for a different input price series file (<code>series1.txt</code> to <code>series5.txt</code>).</p>
<p><strong>Python Script (<code>realVol.py</code>)</strong></p>
<p>This script reads price data from standard input and calculates realized volatility.</p>
<pre><code class="language-python">#------------------------------------
# realVol.py
# Calculate Real Volitility
#------------------------------------
import sys
import math

def main():
    sumsq = 0
    n = 0
    # read first price in file
    price_previous = sys.stdin.readline()
    # read each subsequent price in file
    for price_current in sys.stdin:
        # calculate the daily return
        daily_return = math.log(float(price_current) / float(price_previous))
        # compute the sum of squares
        sumsq = sumsq + daily_return ** 2
        price_previous = price_current
        n = n + 1
    # compute and output realized volatility
    real_vol = 100 * math.sqrt((252.0 / n) * sumsq)
    print(&quot;realized volatility = %.2f&quot; % (real_vol))

if __name__ == '__main__':
    main()
</code></pre>
<p><strong>Slurm Script (<code>realVol.sbatch</code>)</strong></p>
<p>This script uses <code>#SBATCH --array=1-5</code> to create 5 tasks. The <code>${SLURM_ARRAY_TASK_ID}</code> variable is used to select the correct input file (<code>series&lt;ID&gt;.txt</code>) for each task via input redirection. Output files are named using the Job ID (<code>%A</code>) and Task ID (<code>%a</code>).</p>
<pre><code class="language-bash">#!/bin/bash
##------------------------------------
# realVol.sbatch
# Slurm job script
#------------------------------------
#SBATCH --job-name=realVol                 # set the name of the job
#SBATCH --array=1-5                        # create an array job with task IDs ranging from 1 to 5
#SBATCH --export=ALL                       # export env variables to the compute nodes
#SBATCH --mem=512m                         # set the amount of memory required for each task to 512 megabytes
#SBATCH --mail-type=BEGIN,END,FAIL        # send email notifications when the job starts, ends or fails
#SBATCH --output=realVol.%A-%a.out       # set the output file name for each task. The %A is replaced by the job ID and %a is replaced by the task ID.
#SBATCH --partition=test                   # specify the partition to run the job in. In this case, it is &quot;test&quot;.
#SBATCH --time=00:10:00                   # set the maximum time limit for each task to 10 minutes. If a task exceeds this time limit, it will be terminated.

# The --array directive in Slurm allows a single job script to be executed multiple times, each with a different input parameter.
# When a job is submitted with --array, Slurm automatically creates an array of tasks, with each task corresponding to a specific value or range of values for the input parameter.
# The tasks can be executed in parallel on different nodes, and each task can be identified using its task ID, which is automatically assigned by Slurm.
# This feature is particularly useful when running a large number of similar tasks, such as parameter sweeps or simulations with different initial conditions.
# For our use case, we are using it to pass in files dynamically.

echo python realVol.py &lt; `bash -c &quot;unset noglob; ls series${SLURM_ARRAY_TASK_ID}*.txt&quot;`
python realVol.py &lt; `bash -c &quot;unset noglob; ls series${SLURM_ARRAY_TASK_ID}*.txt&quot;`
</code></pre>
<p><strong>Submission Command:</strong></p>
<pre><code class="language-bash">sbatch realVol.sbatch
</code></pre>
<h3 id="r-example-fitspline-model">R Example: Fitspline Model</h3>
<p>This example runs an R script (<code>fitspline.R</code>) multiple times. The script fits a cubic smoothing spline to simulated data. The amount of noise added to the data depends on the Slurm Task ID, and the output plot filename also incorporates the task ID.</p>
<p><strong>R Script (<code>fitspline.R</code>)</strong></p>
<p>This script retrieves the task ID using <code>Sys.getenv("SLURM_ARRAY_TASK_ID")</code>, uses it to calculate the noise variance (<code>v</code>), and generates a task-specific output filename (<code>result_&lt;ID&gt;.ps</code>).</p>
<pre><code class="language-R"># fitspline.R

# Set the initial seed for the random number generator.
set.seed(sample(1:1000, 1))

# Create n = 100 random data points.
# x is n equally spaced values from 0 to 1.
n &lt;- 100
x &lt;- (1:n) / n

# The model in this simulation (no random error)
mval &lt;- ((exp(x / 3) - 2 * exp(-7 * x) + sin(9 * x)) + 1) / 3

# Generate n independent normal random variates with mean 0
# and variance derived from the task id
tid &lt;- as.integer(Sys.getenv(&quot;SLURM_ARRAY_TASK_ID&quot;)) # Get Task ID
v &lt;- tid / 100 # Use Task ID to vary noise
noise &lt;- rnorm(n, 0, v)

# Simulated observed values (model value + noise)
y &lt;- mval + noise

# Fit a cubic smoothing spline to the data
fit &lt;- smooth.spline(x, y, cv = FALSE, all.knots = TRUE)

# Create a graph that shows the data, the smoothing spline,
# and the original model
r &lt;- paste(&quot;result_&quot;, tid, &quot;.ps&quot;, sep = &quot;&quot;) # Use Task ID in filename
postscript(r, height = 8, width = 10, horizo = FALSE)

# Plot data points
plot(x, y, xlab = &quot;x&quot;, ylab = &quot;y&quot;, cex = 0.5)

# Plot original model values without noise
lines(x, mval, lty = 2)

# Plot smooth spline fit
lines(fit$x, fit$y)

# Save the graph to a PS file
graphics.off()
</code></pre>
<p><strong>Slurm Script (<code>fitspline.sbatch</code>)</strong></p>
<p>This script loads the necessary R module and executes the R script using <code>R CMD BATCH</code>. The output R log file is named using the <code>${SLURM_ARRAY_TASK_ID}</code> variable. Note the comment indicating how to submit this script as an array job with specific task IDs.</p>
<pre><code class="language-bash">#!/bin/bash
#
# [ fitspline.sbatch ]
#
# This script demonstrates how to run an R job, specifically,
# how to fit a smooth spline model. It uses a range of SLURM_ARRAY_TASK_ID's
# as a noise parameter for the model.
# --------------------------------------------------------------------
# Submit this job via 'sbatch' which accepts these command line options:
#SBATCH --job-name=fitsplineJob        # Define the name of the current job.
#SBATCH --output=fitsplineJob.Rout     # Define the stdout (the terminal output) file name. (Note: Overridden by R CMD BATCH output redirection below)
#SBATCH --error=fitsplineJob.err      # Define the stderr (the terminal error output) file name.
#SBATCH --export=ALL                  # Export ALL environment variables.
#SBATCH --mail-type=END,FAIL           # Send email when the job ENDs or FAILs.
#SBATCH --mail-user=your-stern-netid@stern.nyu.edu  # Specify your Stern email address.
#SBATCH --mem=512m                    # Specifies the maximum memory per task.
#SBATCH --time=00:10:00               # The wall-clock time limit per task.
#SBATCH --partition=test               # Specify the partition.
# --------------------------------------------------------------------
# How to submit an array job to Stern Slurm cluster.
# Pass array variable values 5, 10, 15 to the R script.
#
# sbatch --array=5-15:5 fitspline.sbatch
# --------------------------------------------------------------------

# Select stat package and version to use
module purge
module load R/4.3.2

# Run R script, directing R output to a task-specific file
R CMD BATCH --no-save --no-restore fitspline.R fitspline.$SLURM_ARRAY_TASK_ID.Rout
</code></pre>
<p><strong>Submission Command:</strong></p>
<p>This command submits the script and creates tasks with IDs 5, 10, and 15.</p>
<pre><code class="language-bash">sbatch --array=5-15:5 fitspline.sbatch
</code></pre>
<h2 id="notes-and-considerations">Notes and Considerations</h2>
<ul>
<li><strong>Resource Allocation:</strong> Resources specified with <code>#SBATCH</code> directives (like <code>--mem</code>, <code>--time</code>, <code>--cpus-per-task</code>) apply to <em>each task</em> in the array job individually.</li>
<li><strong>Job Monitoring:</strong> You can monitor array jobs using <code>squeue</code>. Tasks will often appear with an underscore and the task ID appended to the job ID (e.g., <code>12345_1</code>, <code>12345_2</code>).</li>
<li><strong>Canceling Tasks:</strong> You can cancel the entire array job (<code>scancel &lt;JobID&gt;</code>) or individual tasks (<code>scancel &lt;JobID&gt;_&lt;TaskID&gt;</code>).
```</li>
</ul>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../submitting-batch-jobs/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Submitting Batch Jobs">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Submitting Batch Jobs
              </div>
            </div>
          </a>
        
        
          
          <a href="../running-interactive-jobs-fastx/" class="md-footer__link md-footer__link--next" aria-label="Next: Interactive Jobs (FastX)">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Interactive Jobs (FastX)
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.top", "navigation.sections", "search.suggest", "search.highlight", "toc.integrate", "content.code.annotate", "content.tabs.link", "navigation.instant", "navigation.tracking", "navigation.expand", "navigation.indexes", "navigation.footer", "header.autohide", "navigation.path", "content.action.edit", "content.action.view"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>